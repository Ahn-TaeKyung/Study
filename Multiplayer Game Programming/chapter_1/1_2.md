# 스타시즈: 트라이브스

스타시즈: 트라이브스는 1998년 말에 출시된 SF 장르 FPS다.

빠른 템포의 전투와 당시 기준으로 대규모 접속 가능한 게임 모드를 제공하여 랜이나 인터넷으로 플레이할 수 있었다. 
당시 기술로 이 인원을 수용한다는 것은 실로 엄청나게 어려운 일이었는데, 단적인 예로 대부분 플레이어가 인터넷을 전화 접속으로 하던 시절이다.
전화 접속용 모뎀의 속도는 기껏해야 56.6kbps밖에 되지 않았는데, 트라이브스는 심지어 28.8kbps 모뎀을 가진 유저도 플레이할 수 있었다.

앞으로 만들어 갈 예제 게임인 로보캣 액션도 궁극적으론 트라이브스의 네트워킹 모델을 따라 설계하였으니 참고하자.

네트워크 게임을 설계할 때 가장 먼저 정해둘 것은 통신 프로토콜이다. 여기서 프로토콜이란 두 대의 컴퓨터 사이에 어떤 데이터가 오고 갈지를 정해둔 규약이다.
2장에서 인터넷의 동작원리와 인터넷에 주로 사용되는 프로토콜을 다룬다.
3장 에선 이들 프로토콜을 제어하는데 가장 널리 쓰이는 라이브러리인 버클리 소켓을 자세히 살펴본다.
일단, 트라이브스는 효율성 문제로 비신뢰성 프로토콜을 사용한다는 정도만 알아두자. 즉, 네트워크로 보낸 데이터가 수신자에게 반드시 도착한다는 보장이 없다는 뜻이다.

하지만 게임에 참여한 모든 플레이어에게 중요한 정보까지도 모조리 비신뢰성 프로토콜로 보내면 문제가 야기될 수 있다.
따라서 개발할 때 데이터의 종류에 따라 어떻게 보낼지를 구분해 두어야 한다.

트라이브스를 개발하는 과정에선 크게 다음 네가지 종류로 데이터 전송의 요구 사항을 구분했다.

1. 전달 미보장 데이터

말 그대로 게임에 있어 그다지 중요하지는 않은 데이터를 지칭한다. 대역폭이 고갈되면 게임 시스템은 이런 종류의 데이터부터 생략해 버린다.

2. 전달 보장 데이터

수신이 보장되어야 하며 나아가 데이터가 보낸 순서대로 도착하는 것도 보자오디어야 하는 데이터이다.
게임에 있어 매우 중요하다고 판단되는 데이터로, '플레이어가 총을 발사했다'는 이벤트가 그 예이다.

3. 최신 상태 데이터

최신 상태가 아니면 전달할 의미가 없는 성격의 데이터이다. 예를 들면 특정 플레이어의 체력 수치가 그렇다.
지금 현재 HP를 알고 있다면 5초 전의 HP가 얼마였는지는 굳이 전달할 필요가 없다.

4. 특급 전달 보장 데이터

최우선으로 보내야 하며 아울러 전달이 보장되어야 하는 데이터가 여기에 속한다.
플레이어 위치 정보가 그 예로, 시간이 지체될수록 정보의 가치가 급격히 떨어지므로 최대한 빨리 전달해야 한다.

트라이브스가 사용한 네트워킹 모델에선 이들 네 종류의 데이터 성격에 따라 여러 세부사항을 결정했다.

또 한가지 중요한 결정사항은 바로 <피어-투-피어: P2P> 대신 <클라이언트-서버:CS> 모델을 채택한 것이다.
CS모델에서는 모든 플레이어가 중앙 서버 하나에 접속하는 데 반해, P2P 모델에선 각각의 플레이어가 모든 플레이어와 연결을 유지해야 한다.
6장에서 더 논의하겠지만, P2P 모델은 O(n2)의 대역폭이 필요하다.  이는 사용자 수의 제곱에 비례하여 대역폭이 소모된다는 뜻이다.
이 경우 n, 즉 사용자 수가 128이라면 P2P 연결 시 각각의 플레이어는 주어진 대역폭을 n 제곱인 16,384로 나눠 써야 하는 셈이다. 

이 같은 문제를 피하고자 트라이브스에선 CS 모델을 채택했다. 클라이언트-서버로 구성하면 각 플레이어에 할당되는 대역은 상수로 고정되며, 서버만 O(n) 대역폭을 처리하면 된다.
그렇지만 이는 곧 서버가 들어오는 연결을 모두 받아줄 수 있을 정도로 강력해야 함을 뜻하는데, 당시 그 정도의 회선은 기업이나 대학만이 보유할 법한 사양이었다.

